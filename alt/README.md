# CodeGen alternatives to py-gitea

I used the swagger json from hub.allspice.io and various OpenAPI-based client
generators to generate python clients for AllSpice hub. Each has their own pros
and cons.

Only one generator worked directly with the OpenAPI spec currently generated by
hub, as it is v2. The rest required converting the spec from v2 to v3 using
[swagger2openapi](https://github.com/Mermade/oas-kit).

## Swagger Codegen

Source: https://github.com/swagger-api/swagger-codegen/

This is in the [swagger2 folder](./swagger2). This is the only one that directly
works with the hub spec. If we convert our spec to v3, we can also use Swagger
Codegen v3, the result of which is in the [swagger3 folder.](./swagger3) I don't
see much of a difference between these two, the only thing I noticed is that the
tox file for the v2 generated client also supports python 2 while the v3
generated one doesn't. Either way both clients worked on python 3.10.

An added advantage of using this is that it automatically generates "docs" and
"tests". These are pretty barebones.

## OpenAPI Generator

Source: https://github.com/OpenAPITools/openapi-generator

This is in the [openapi_generator](./openapi_generator) directory. This only
works with v3 specs. Most importantly, it generated syntactically invalid code
when I ran it. I had to dig into the code and inject `pass`es in a bunch of
places to even get it to work, which disqualifies it.

## OpenAPI Python Client

Source: https://github.com/openapi-generators/openapi-python-client

This is in the [all-spice-api-client](./all-spice-api-client) directory. Also
only works with v3 specs, but generates a more "modern" project built with
poetry and using httpx instead of bare urllib3. On the flipside, it doesn't
generate docs. The API is also different and at least to me slightly worse:
there's a different module for each endpoint and you _have_ to read docs
to get it.
